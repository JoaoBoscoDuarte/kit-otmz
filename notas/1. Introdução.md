# Otimização combinatória
É a busca pela melhor solução (ótima) em problemas nos quais o conjunto de soluções possíveis é discreto (ou seja, não contínuo).
Exemplo: Problema do caxeiro viajante (TSP), onde o objetivo é encontrar o menor caminho que passa entre todas as cidades.

## 1.1 TSP
É a busca pela melhor solução (ótima) em problemas nos quais o conjunto de soluções possíveis é discreto (ou seja, não contínuo). 
- Definição: dado um conjunto de cidades e as distâncias entre cada par delas, o objetivo é encontrar uma rota que:
	- Visite cada cidade exatamente uma vez 
	- Retorne a cidade de origem 
	- Miniminize a distância total percorrida (Ou tempo de viagem).
Essa distância total é chamado de **valor objetivo** da solução.

Exemplo: Imagine 6 cidades em um mapa (Imagem a baixo). 
![[Screenshot_20250903_222443.png]]

Cada par de cidades tem uma distância associada (mostrada em uma tabela de distâncias).

| Cidade | 1   | 2   | 3   | 4   | 5   | 6   |
|--------|-----|-----|-----|-----|-----|-----|
| **1**  |  -  | 245 | 174 | 118 | 59  | 129 |
| **2**  |  -  |  -  | 250 | 226 | 186 | 147 |
| **3**  |  -  |  -  |  -  | 274 | 169 | 114 |
| **4**  |  -  |  -  |  -  |  -  | 105 | 185 |
| **5**  |  -  |  -  |  -  |  -  |  -  | 87  |
| **6**  |  -  |  -  |  -  |  -  |  -  |  -  |

- Uma solução **viável** é um percurso que passa por todas as cidades e retorna ao ponto de partida.

![[Screenshot_20250903_225106.png]]
- Duas rotas possíveis resultaram em:
    - 902 km (rota A)
    - 825 km (rota B)  
        Como 825 km é menor, a rota B é **preferível**.

### 1.1.1 Dificuldade do problema
O TSP pode ser resolvido, em teoria, examinando **todas as rotas possíveis**.
- Cada rota corresponde a uma **permutações das cidades**.
- Como a rota inicial e o sentido (horário ou anti-horário) não importam, o número de soluções distintas é:
$$
\frac{(n-1)!}{2}
$$
- Para 6 cidades, seriam **60 rotas** possíveis.
- Mas, se nnn for grande (ex.: 60 cidades), o número de soluções explode para além do número estimado de átomos no universo!
Logo, testar todas as possibildiades é impossível 

---
O TSP é **NP-difícil**: não se conhece um algoritmo eficiente que resolva o problema em tempo polinomial.
- Por isso, em vez de buscar a solução exata em casos grandes, usam-se **algoritmos aproximados e heurísticas**.

### 1.1.2 Abordagens
Existe duas maneiras de resolver problemas de otimização combinatória como o TSP:
- **Métodos exatos:** São algoritmos que **garantem encontrar a solução ótima** (a melhor possível) para o problema.
	- **Vantagem:** a solução encontrada é garantidamente a melhor.
	- **Desvantagem:** podem ser **muito lentos** em problemas grandes, pois o custo computacional cresce rápido.
- Métodos Heurísticos: São algoritmos que **buscam boas soluções**, mas **não garantem que sejam ótimas**.
	- **Vantagem:** muito mais rápidos, funcionam bem em instâncias grandes.
	- **Desvantagem:** podem parar em uma solução que não é a melhor possível.


## 1.2 Preliminares
### 1.2.1 Grafos
Um **grafo** é um par $G=(V,E)$ onde:
- $V$ é o conjunto de **vértices**;
- $E$ é o conjunto de **arestas**, com cada aresta sendo um par de vértices distintos:
$$
E \subseteq \{ \{i,j\} \mid i,j \in V, i \neq j \}
$$
Exemplo (a. Grafo não orientado):
$$
V = \{1,2,3,4,5\}, \quad 
E = \{\{1,4\}, \{1,5\}, \{2,3\}, \{3,4\}, \{4,5\}, \{2,4\}, \{3,5\}\}
$$
Um grafo é **completo** se todos os vértices estiverem conectados entre si. (b. Grafo completo.)

---
#### Grafo com peso
Se cada aresta $e = \{i,j\} \in E$ tiver um **peso** $c_{ij}$ (um número real), o grafo é chamado **grafo ponderado** ou **com pesos** :
$$
G = (V, E, C), \quad C = \{ c_{ij} \mid \{i,j\} \in E \}
$$
**Exemplo de pesos (c. Grafo com pesos):**
$$
c_{2,3} = 3.14, \quad c_{1,2} = 60, \quad c_{3,5} = 42, \quad c_{4,5} = -1
$$
---
#### Passeio
Um **passeio** em um grafo $G = (V,E)$ é uma sequência alternada de vértices e arestas:
$$
v_0 e_0 v_1 e_1 \dots e_{k-1} v_k
$$
tal que cada aresta $e_i = \{v_i, v_{i+1}\} \in E$.  
> Observação: vértices e arestas podem ser visitados mais de uma vez.

---
#### **Ciclo e Ciclo Hamiltoniano**
- Um **ciclo** é um passeio que **começa e termina no mesmo vértice**.
- Um **ciclo Hamiltoniano** é um ciclo que **visita cada vértice exatamente uma vez**.
$$
\{v_0, v_1, \dots, v_{k-1}\} = V, \quad v_i \neq v_j \text{ para } i \neq j
$$
![[Screenshot_20250903_232348.png]]

### 1.2.2 Representação do TSP por meio de grafos
Uma **instância do TSP** pode ser representada como um **grafo completo com pesos**:
- Cada **nó**: uma cidade.
- Cada **aresta**: distância (ou custo) entre duas cidades.
- Resolver o TSP = encontrar um **ciclo Hamiltoniano** de **custo mínimo**, ou seja, a soma dos pesos das arestas no ciclo é a menor possível.
- O grafo também pode ser representado por uma matriz de adjacência $M$: $M_{ij} = c_{ij}$, onde $c_{ij}$ é o peso (distância) entre as cidades $i$ e $j$.


### 1.2.3 Leitor de instâncias
- **Leitor de instâncias:** é um programa que **lê arquivos que contêm dados de problemas TSP**
- Ele **constrói a matriz de adjacência** do grafo correspondente à instância: $matrizAdj[i][j]=c_{ij}$, onde $c_{ij}$ é a distância entre a cidade $i$ e a cidade $j$.
- Indexação a partir de 1:
	- neste leitor o primeiro elemento é 1.
	- Exemplo: se há 14 cidades, a distância entre a primeira e a última cidade é acessada assim: `matrizAdj[1][14]` ou `matrizAdj[14][1]`
